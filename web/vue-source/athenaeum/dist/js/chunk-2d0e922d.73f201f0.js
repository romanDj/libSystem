(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e922d"],{"8bf3":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container mt-4 mb-3"},["view"==t.typePage?[o("h4",{staticClass:"mb-3"},[t._v("Список книг")]),o("button",{staticClass:"btn btn-primary btn-sm mb-3",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.addView(e)}}},[t._v("Добавить ")]),t.isLoading?[o("p",{staticClass:"text-center text-secondary mt-4"},[t._v(" Загрузка...")])]:[null==t.books||0==t.books.length?o("p",{staticClass:"text-center text-secondary mt-4"},[t._v(" пока нет ни одной книги")]):o("table",{staticClass:"table table-striped table-hover"},[t._m(0),o("tbody",t._l(t.books,(function(e,i){return o("tr",{key:"book"+e.id},[o("th",{attrs:{scope:"row"}},[t._v(t._s(i+1))]),o("td",[t._v(t._s(e.title))]),o("td",[t._v(t._s(e.description))]),o("td",[t._v(t._s(e.author?e.author.fio:""))]),o("td",[o("span",{staticClass:"mdi mdi-pencil text-primary m-1",staticStyle:{"font-size":"20px"},on:{click:function(o){return o.preventDefault(),function(){return t.editView(e)}()}}}),o("span",{staticClass:"mdi mdi-delete text-danger m-1",staticStyle:{"font-size":"20px"},on:{click:function(o){return o.preventDefault(),function(){return t.deleteView(e)}()}}})])])})),0)])]]:"add"==t.typePage?[o("h4",{staticClass:"mb-3"},[t._v("Добавление")]),o("form",{staticStyle:{"max-width":"450px"},on:{submit:function(e){return e.preventDefault(),t.addBook(e)}}},[o("div",{staticClass:"mb-3"},[o("label",{staticClass:"form-label",attrs:{for:"title"}},[t._v(" Название")]),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.currBook.title,expression:"currBook.title",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"title",type:"text"},domProps:{value:t.currBook.title},on:{input:function(e){e.target.composing||t.$set(t.currBook,"title",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),o("div",{staticClass:"mb-4"},[o("label",{staticClass:"form-label",attrs:{for:"description"}},[t._v(" Описание")]),o("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.currBook.description,expression:"currBook.description",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"description",rows:"3"},domProps:{value:t.currBook.description},on:{input:function(e){e.target.composing||t.$set(t.currBook,"description",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),o("div",{staticClass:"mb-4"},[o("label",{staticClass:"form-label",attrs:{for:"author"}},[t._v(" Автор")]),o("select",{directives:[{name:"model",rawName:"v-model",value:t.currBook.author_id,expression:"currBook.author_id"}],staticClass:"form-select",attrs:{id:"author"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.currBook,"author_id",e.target.multiple?o:o[0])}}},[o("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("-- выберите автора --")]),t._l(t.authors,(function(e,i){return o("option",{key:"author"+e.id,domProps:{value:e.id}},[t._v(t._s(e.fio)+" ")])}))],2)]),o("button",{staticClass:"btn btn-secondary mr-2",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.mainView(e)}}},[t._v(" Отмена ")]),t.isLoading?o("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:""}},[t._v("Загрузка... ")]):o("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v(" Сохранить ")])])]:"edit"==t.typePage?[o("h4",{staticClass:"mb-3"},[t._v("Редактирование")]),o("form",{staticStyle:{"max-width":"450px"},on:{submit:function(e){return e.preventDefault(),t.editBook(e)}}},[o("div",{staticClass:"mb-3"},[o("label",{staticClass:"form-label",attrs:{for:"title1"}},[t._v(" Название")]),o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.currBook.title,expression:"currBook.title",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"title1",type:"text"},domProps:{value:t.currBook.title},on:{input:function(e){e.target.composing||t.$set(t.currBook,"title",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),o("div",{staticClass:"mb-4"},[o("label",{staticClass:"form-label",attrs:{for:"description1"}},[t._v(" Описание")]),o("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.currBook.description,expression:"currBook.description",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"description1",rows:"3"},domProps:{value:t.currBook.description},on:{input:function(e){e.target.composing||t.$set(t.currBook,"description",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),o("div",{staticClass:"mb-4"},[o("label",{staticClass:"form-label",attrs:{for:"author1"}},[t._v(" Автор")]),o("select",{directives:[{name:"model",rawName:"v-model",value:t.currBook.author_id,expression:"currBook.author_id"}],staticClass:"form-select",attrs:{id:"author1"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.currBook,"author_id",e.target.multiple?o:o[0])}}},[o("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("-- выберите автора --")]),t._l(t.authors,(function(e,i){return o("option",{key:"author"+e.id,domProps:{value:e.id}},[t._v(t._s(e.fio)+" ")])}))],2)]),o("button",{staticClass:"btn btn-secondary mr-2",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.mainView(e)}}},[t._v(" Отмена ")]),t.isLoading?o("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:""}},[t._v("Загрузка... ")]):o("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v(" Сохранить ")])])]:"delete"==t.typePage?[o("h4",{staticClass:"mb-3"},[t._v("Подтверждение")]),o("p",{staticClass:"mb-4"},[t._v("Вы уверены, что хотите удалить ("+t._s(t.currBook.title)+") ?")]),o("button",{staticClass:"btn btn-secondary mr-2",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.mainView(e)}}},[t._v(" Отмена ")]),t.isLoading?o("button",{staticClass:"btn btn-danger",attrs:{type:"submit",disabled:""}},[t._v("Загрузка... ")]):o("button",{staticClass:"btn btn-danger",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.removeBook(e)}}},[t._v(" Удалить ")])]:t._e()],2)},r=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",[o("tr",[o("th",{attrs:{scope:"col"}},[t._v("#")]),o("th",{attrs:{scope:"col"}},[t._v("Название")]),o("th",{attrs:{scope:"col"}},[t._v("Описание")]),o("th",{attrs:{scope:"col"}},[t._v("Автор")]),o("th",{attrs:{scope:"col"}})])])}],s={id:null,title:"",description:"",author_id:null,author:null},a={name:"Book",data:function(){return{isLoading:!1,typePage:"view",currBook:Object.assign({},s)}},computed:{authors:function(){return this.$store.getters.authors},books:function(){return this.$store.getters.books}},methods:{loadAuthors:function(){this.$store.dispatch("loadAuthors")},loadBooks:function(){var t=this;this.isLoading=!0,this.$store.dispatch("loadBooks").finally((function(){t.isLoading=!1}))},mainView:function(){this.typePage="view"},addView:function(){this.currBook=Object.assign({},s),this.typePage="add"},editView:function(t){this.currBook=Object.assign({},t),this.typePage="edit"},deleteView:function(t){this.currBook=Object.assign({},t),this.typePage="delete"},addBook:function(){var t=this;this.isLoading=!0,this.$store.dispatch("addBook",this.currBook).finally((function(){t.isLoading=!1,t.mainView()}))},editBook:function(){var t=this;this.isLoading=!0,this.$store.dispatch("editBook",this.currBook).finally((function(){t.isLoading=!1,t.mainView()}))},removeBook:function(){var t=this;this.isLoading=!0,this.$store.dispatch("removeBook",this.currBook.id).finally((function(){t.isLoading=!1,t.mainView()}))}},mounted:function(){this.loadBooks(),this.loadAuthors()}},n=a,l=o("2877"),c=Object(l["a"])(n,i,r,!1,null,"b0fdd25e",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0e922d.73f201f0.js.map